# Story 1.2.3: Create Session Starter Configuration

## Status
Draft

## Story
**As a** Phase 0 developer,
**I want** a session configuration file that Claude Code can load to start Phase 1 autonomously,
**so that** Phase 1 begins with all context, credentials, and validation gates pre-configured for dev-agent execution.

## Acceptance Criteria

1. Configuration file created at `Landing Pages Automation/claude-session-config.yaml`
2. Configuration includes `context_files` section listing all files from Story 2.1 with loading priorities
3. Configuration includes `credentials` section template with environment variable references: `${TAVILY_API_KEY}`, `${AIRTABLE_API_KEY}`, etc. (NO hardcoded secrets - validated via grep or security scan)
4. Configuration includes `checkpoint_triggers` section defining: time-based checkpoints (every 30 minutes), error-triggered checkpoints (on exception/failure), phase-completion checkpoints (after each stage)
5. Configuration includes `workflow_reference` pointing to Phase 1 build stage definitions (Story 2.2) for BMAD Orchestrator stage management
6. YAML structure is valid and parseable (validated with YAML linter or manual parse test - either method acceptable)
7. Session config committed to Git with message: `feat: create Phase 1 session starter configuration for BMAD Orchestrator`

## Tasks / Subtasks

- [ ] Review prerequisite documents (Prerequisites)
  - [ ] Read `docs/phase-1-context-files.md` (Story 2.1)
  - [ ] Read `docs/phase-1-build-stages.md` (Story 2.2)
  - [ ] Read `docs/phase-0-env-vars.md` for environment variable list
  - [ ] Compile configuration requirements
- [ ] Create session configuration file (AC: 1)
  - [ ] Create `Landing Pages Automation/claude-session-config.yaml`
  - [ ] Set up YAML structure
  - [ ] Add configuration header and comments
- [ ] Add context_files section (AC: 2)
  - [ ] List all context files from Story 2.1
  - [ ] Specify loading priorities (always vs. on-demand)
  - [ ] Add file paths and loading instructions
  - [ ] Document Active vs Archive tier strategy
- [ ] Add credentials section (AC: 3)
  - [ ] Create credentials template structure
  - [ ] Add environment variable references: `${TAVILY_API_KEY}`
  - [ ] Add `${AIRTABLE_API_KEY}`, `${MAKE_API_KEY}`, `${NETLIFY_API_TOKEN}`
  - [ ] Add `${CLAUDE_API_KEY}` for Make.com integration
  - [ ] Ensure NO hardcoded secrets (validate with grep)
- [ ] Add checkpoint_triggers section (AC: 4)
  - [ ] Define time-based checkpoints: every 30 minutes
  - [ ] Define error-triggered checkpoints: on exception/failure
  - [ ] Define phase-completion checkpoints: after each stage (1-6)
  - [ ] Document checkpoint behavior and purpose
- [ ] Add workflow_reference section (AC: 5)
  - [ ] Reference `docs/phase-1-build-stages.md`
  - [ ] Link to BMAD Orchestrator stage management
  - [ ] Document stage progression logic
  - [ ] Add validation gate references
- [ ] Validate YAML structure (AC: 6)
  - [ ] Use YAML linter if available
  - [ ] Perform manual parse test if linter unavailable
  - [ ] Fix any syntax errors
  - [ ] Verify structure completeness
- [ ] Security scan for secrets (AC: 3)
  - [ ] Run grep for hardcoded patterns (api_key=, token=, secret=)
  - [ ] Verify only environment variable references present
  - [ ] Document scan results in validation log
- [ ] Commit session config to Git (AC: 7)
  - [ ] Review configuration for completeness
  - [ ] Stage file with `git add`
  - [ ] Create commit with message: `feat: create Phase 1 session starter configuration for BMAD Orchestrator`
  - [ ] Verify commit was created successfully

## Dev Notes

### Context
Third story in Phase 0 Epic 2. Creates the session configuration file that BMAD Orchestrator loads to initialize dev-agent Phase 1 execution. This is the "activation file" for autonomous 30-hour build.

### Key Information
- **Config Location:** `Landing Pages Automation/claude-session-config.yaml`
- **Key Sections:**
  - `context_files`: What to load (from Story 2.1)
  - `credentials`: Environment variables (references only)
  - `checkpoint_triggers`: When to save state
  - `workflow_reference`: Stage definitions (from Story 2.2)

### Dependencies
- **Prerequisites:** Stories 2.1 (context files list), 2.2 (build stages)
- **Blocks:** Story 2.5 (configuration loading validation)
- **Informs:** Dev-agent Phase 1 initialization

### Configuration Purpose
- **Context Loading:** Tells dev-agent which files to load and when
- **Credential Management:** Environment variable references (secure)
- **Checkpoint Strategy:** State preservation for recovery and resumption
- **Workflow Orchestration:** Stage-based execution with validation gates

### Checkpoint Strategy
- **Time-Based (30 min):** Regular state snapshots during long operations
- **Error-Triggered:** Save state before failure for recovery
- **Phase-Completion:** Checkpoint after each stage for resumption

### Environment Variables Required
- `TAVILY_API_KEY`: Research and search (Phase 0)
- `AIRTABLE_API_KEY`: Data storage (Phase 1 Stage 4)
- `MAKE_API_KEY`: Workflow automation (Phase 1 Stage 5)
- `NETLIFY_API_TOKEN`: Deployment (Phase 1 Stage 6)
- `CLAUDE_API_KEY`: Content generation via Make.com (Phase 1 Stage 5)

### Important Decisions
- YAML format for readability and parseability
- Environment variable references only (no secrets in config)
- Checkpoint strategy balances state preservation with performance
- Configuration is version-controlled (contains no secrets)
- BMAD Orchestrator compatibility ensures framework integration

### Testing

**Test Standards:**
- No automated tests required (configuration file)
- YAML syntax validation (linter or manual)
- Security scan for hardcoded secrets

**Validation Requirements:**
- All required sections present
- Context files list complete with priorities
- Only environment variable references (no secrets)
- Checkpoint triggers defined
- Workflow reference points to build stages
- YAML is valid and parseable
- Security scan passes (no hardcoded secrets)
- Document committed to Git

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-07 | 1.0 | Initial story creation from Epic 2 requirements | PM Agent (John) |

## Dev Agent Record

_(This section is owned by dev-agent and can only be modified by dev-agent)_

### Agent Model Used
_(This section will be populated by dev-agent during implementation)_

### Debug Log References
_(This section will be populated by dev-agent during implementation)_

### Completion Notes
_(This section will be populated by dev-agent during implementation)_

### File List
_(This section will be populated by dev-agent during implementation)_

## QA Results

_(This section is owned by qa-agent and can only be modified by qa-agent)_
